extends templates/template.jade
block title
	title Nuevo Niñ@ en ¡Not Down, Yes Up!
block exit
	h2.exit
		a(href='/admin/menu-admin') VOLVER
block content
	-if (data)
		-var edit = true
		-var classFormValid = "hide"
		-var mom = data.parents.mom
		-var dad = data.parents.dad
		-var cure = data.parents.cure
		-var children = data.children
	-else
		-var edit = false
		-var mom = {}
		-var dad = {}
		-var cure = {}
		-var children = {}
		-var classForm = "hide"
		-var classFormValid = "show"
	
	section.register
		h3(class="#{classFormValid}") Niñ@s Nuev@s
		article
			form#formValidChildren(class="#{classFormValid}")
				fieldset.data.validChildren
					legend ¡Maravilloso! ¿Qué niñ@ conoceremos hoy?
					article
						input#validChildren(type='number', name='validChildren', min='1111', placeholder='Número Identificación', required='')
					article
						button(type='submit')
							span Iniciar Registro
				
			form#formAddChildren(class="#{classForm}" action="" method="POST" enctype="multipart/form-data")
				input(type="hidden" value="#{edit}" id="editingChildren" name="editingChildren")
				fieldset.children
					legend Niñ@
					section.data
						fieldset
							legend Personal
							if (edit)
								input.idChildren#idChildren(type='number', name='idChildren' value="#{children.idChildren}")
							else
								input.idChildren#idChildren(type='number', name='idChildren' value="#{children.idChildren}", readonly)
							input#nameChildren(type='text', name='nameChildren' value="#{children.nameChildren}", placeholder='Nombres Niñ@', required='')
							input#lastnameChildren(type='text', name='lastnameChildren' value="#{children.lastnameChildren}", placeholder='Apellidos Niñ@', required='')
							article.img
								span Foto
								input#imgChildren(type='file', name='imgChildren' value="#{children.imgChildren}", accept='image/*' )
							label(for='birthdateChildren') Fecha de Nacimiento
							input#birthdateChildren(type='date' name='birthdateChildren' data-date='#{children.birthdateChildren}' required='')

							input#birthplaceChildren(type='text', name='birthplaceChildren' value="#{children.birthplaceChildren}", placeholder='Lugar de Nacimiento', required='')
							article
								label(for='ageChildren') Edad en Meses: 
								input#ageChildren(type='number', name='ageChildren' value="#{children.ageChildren}", min='0', max='48', placeholder='Edad en meses', required='')
								label(for='genderChildren') Sexo
								select#genderChildren(name='genderChildren' data-value="#{children.genderChildren}")
									option(value='0', selected='') Niña
									option(value='1') Niño
								label(for='liveSon')  ¿Vive con?
								select#liveSon(name='liveSon' data-value="#{children.liveSon}")
									option(value='0', selected='') Ambos Padres
									option(value='1') Mamá
									option(value='2') Papá
									option(value='3') Otro Cuidador
							article
								input#addressChildren(type='text', name='addressChildren' value="#{children.addressChildren}", placeholder='Dirección', required='')
								input#districtChildren(type='text', name='districtChildren' value="#{children.districtChildren}", placeholder='Barrio', required='')
								input#localityChildren(type='text', name='localityChildren' value="#{children.localityChildren}", placeholder='Localidad')
								input#municipalityChildren(type='text', name='municipalityChildren' value="#{children.municipalityChildren}", placeholder='Ciudad/Municipio', required='')
								input#departamentChildren(type='text', name='departamentChildren' value="#{children.departamentChildren}", placeholder='Departamento', required='')
								label(for='levelhomeChildren') Estrato de la residencia: 
								input#levelhomeChildren(type='number', name='levelhomeChildren' value="#{children.levelhomeChildren}", min='1', max='6', placeholder='Estrato', required='')
						fieldset
							legend Salud
							textarea#healthChildren(name='healthChildren' placeholder='Indicaciones de Salud...' required) #{children.healthChildren}
							article
								input#epsChildren(type='text', name='epsChildren' value="#{children.epsChildren}", placeholder='EPS del niñ@', required='')
							article
								label(for='apbChildren') APB -Organización que cobija al niñ@ (Policia, Ejercito, Sanidad Naval, Fuerza Aérea, Ecopetrol, ETB): 
								input#apbChildren(type='text', name='apbChildren' value="#{children.apbChildren}", placeholder='APB del niño')
							article
								label(for='glassesChildren')  ¿Usa Gafas:?
								select#glassesChildren(name='glassesChildren' data-value="#{children.glassesChildren}")
									option(value='0', selected='') No
									option(value='1') Si
								label(for='hearingaidChildren')  ¿Usa Audífonos:?
								select#hearingaidChildren(name='hearingaidChildren' data-value="#{children.hearingaidChildren}")
									option(value='0', selected='') No
									option(value='1') Si
						fieldset
							legend Habilidades
							textarea#abilityChildren(name='abilityChildren' value="#{children.abilityChildren}" placeholder='Habilidades del niñ@...')
						fieldset
							legend Debilidades
							textarea#debilityChildren(name='debilityChildren' value="#{children.debilityChildren}" placeholder='Debilidades del niñ@...')
				fieldset.mom
					legend Mamá
					section.data
						fieldset
							legend Personal
							article
								input.idMom#idParent(type='number', name='idParent', value="#{mom.idParent}" min='1111', placeholder='Cédula Mamita', required='')
								input#idExpeditionParent(type='text', name='idExpeditionParent', value="#{mom.idExpeditionParent}" placeholder='Lugar de Expedición', required='')
							article
								input#nameParent(type='text', name='nameParent', value="#{mom.nameParent}" placeholder='Nombres Mamita', required='')
								input#lastnameParent(type='text', name='lastnameParent', value="#{mom.lastnameParent}" placeholder='Apellidos Mamita', required='')
							article
								label(for='birthdateParent') Fecha de Nacimiento
								input#birthdateParent(type='date' name='birthdateParent' data-date="#{mom.birthdateParent}")
							article.img
								span Foto
								input#imgParent(type='file', name='imgMom', value="#{mom.imgParent}" accept='image/*' )
						fieldset
							legend Contacto
							article
								input#telParent(type='number', name='telParent', value="#{mom.telParent}" min='1111111', max='9999999', placeholder='Teléfono Fijo', required='')
								input#celParent(type='number', name='celParent', value="#{mom.celParent}" min='1111111111', max='9999999999', placeholder='Celular', required='')
								input#emailParent(type='email', name='emailParent', value="#{mom.emailParent}" placeholder='correo-mamita@abc.com')
						fieldset
							legend Profesión
							article
								label(for='studyParent') Nivel de Estudios
								select#studyParent(name='studyParent' data-value="#{mom.studyParent}")
									option(value='0', selected='') Básica Primaria
									option(value='1') Básica Secundaria
									option(value='2') Bachiller
									option(value='3') Técnico Profesional
									option(value='4') Tecnólogo
									option(value='5') Profesional
									option(value='6') Especialización
									option(value='7') Maestría
									option(value='8') Doctorado
							input#professionParent(type='text', name='professionParent', value="#{mom.professionParent}" placeholder='Título adquirido')
							input#jobParent(type='text', name='jobParent', value="#{mom.jobParent}" placeholder='Ocupación')
				fieldset.dad
					legend Papá
					section.data
						fieldset
							legend Personal
							article
								input.idDad#idParent(type='number', name='idParent', value="#{dad.idParent}" min='1111', placeholder='Cédula Papito', required='')
								input#idExpeditionParent(type='text', name='idExpeditionParent', value="#{dad.idExpeditionParent}" placeholder='Lugar de Expedición', required='')
							article
								input#nameParent(type='text', name='nameParent', value="#{dad.nameParent}" placeholder='Nombres Papito', required='')
								input#lastnameParent(type='text', name='lastnameParent', value="#{dad.lastnameParent}" placeholder='Apellidos Papito', required='')
							article
								label(for='birthdateParent') Fecha de Nacimiento
								input#birthdateParent(type='date' name='birthdateParent' data-date="#{dad.birthdateParent}")
							article.img
								span Foto
								input#imgParent(type='file', name='imgDad', value="#{dad.imgParent}" accept='image/*' )
						fieldset
							legend Contacto
							article
								input#telParent(type='number', name='telParent', value="#{dad.telParent}" min='1111111', max='9999999', placeholder='Teléfono Fijo', required='')
								input#celParent(type='number', name='celParent', value="#{dad.celParent}" min='1111111111', max='9999999999', placeholder='Celular', required='')
								input#emailParent(type='email', name='emailParent', value="#{dad.emailParent}" placeholder='correo-papito@abc.com')
						fieldset
							legend Profesión
							article
								label(for='studyParent') Nivel de Estudios
								select#studyParent(name='studyParent' data-value="#{dad.studyParent}")
									option(value='0', selected='') Básica Primaria
									option(value='1') Básica Secundaria
									option(value='2') Bachiller
									option(value='3') Técnico Profesional
									option(value='4') Tecnólogo
									option(value='5') Profesional
									option(value='6') Especialización
									option(value='7') Maestría
									option(value='8') Doctorado
							input#professionParent(type='text', name='professionParent', value="#{dad.professionParent}" placeholder='Título adquirido')
							input#jobParent(type='text', name='jobParent', value="#{dad.jobParent}" placeholder='Ocupación')
				fieldset.care
					legend Cuidador
					section.data
						fieldset
							legend Personal
							article
								input.idCare#idParent(type='number', name="idParent", value="#{cure.idParent}" min='1111', placeholder='Cédula Cuidador', required='')
								input#idExpeditionParent(type='text', name="idExpeditionParent", value="#{cure.idExpeditionParent}" placeholder='Lugar de Expedición', required='')
							article
								input#nameParent(type='text', name="nameParent", value="#{cure.nameParent}" placeholder='Nombres Cuidador', required='')
								input#lastnameParent(type='text', name="lastnameParent", value="#{cure.lastnameParent}" placeholder='Apellidos Cuidador', required='')
							article
								label(for='birthdateParent') Fecha de Nacimiento
								input#birthdateParent(type='date' name='birthdateParent' data-date="#{cure.birthdateParent}")
							article.img
								span Foto
								input#imgParent(type='file', name="imgCure", value="#{cure.imgParent}" accept='image/*' )
						fieldset
							legend Contacto
							article
								input#telParent(type='number', name="telParent", value="#{cure.telParent}" min='1111111', max='9999999', placeholder='Teléfono Fijo', required='')
								input#celParent(type='number', name="celParent", value="#{cure.celParent}" min='1111111111', max='9999999999', placeholder='Celular', required='')
								input#emailParent(type='email', name="emailParent", value="#{cure.emailParent}" placeholder='correo-cuidador@abc.com')

				fieldset.user.data
					legend Confirmar Registro
					section
						if !edit
							button(type='submit' data-action="create")
								span Registrar
						else
							button(type='submit' data-action="edit")
								span Actualizar
						button(type='reset')
							span Limpiar
						p.cancel
							a(href='/admin/menu-admin') Cancelar
	
	script(src="/js/app.js")
	script.
		var data = !{JSON.stringify(data)}
		console.log(data)
		
	if(edit)
		script.
			$("[data-value]").each((a,e) => {
				if($(e).data("value")) {
					$(e).val($(e).data("value"))
				}
			})
			$("[data-date]").each((a,e) => {
				if($(e).data("date")){
					$(e).val(new Date($(e).data("date")).toISOString().slice(0,10))
				}
			})
	script.
		$("[value=undefined]").val(function(){
			if(this.value == 'undefined') {
				this.value = " "
			}
		})